<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS 核心面试 | Dai&#39;s blog</title>
    <meta name="description" content="学海无涯，永无止尽">
    <link rel="icon" href="/images/photo1.jpg">
  <link rel="manifest" href="/images/photo1.jpg">
  <link rel="apple-touch-icon" href="/images/photo1.jpg">
  <meta http-quiv="pragma" cotent="no-cache">
  <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
  <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/assets/css/0.styles.7a8c588f.css" as="style"><link rel="preload" href="/assets/js/app.f426d84b.js" as="script"><link rel="preload" href="/assets/js/17.e27753d2.js" as="script"><link rel="prefetch" href="/assets/js/10.598aec70.js"><link rel="prefetch" href="/assets/js/11.0a334ef2.js"><link rel="prefetch" href="/assets/js/12.f83989bb.js"><link rel="prefetch" href="/assets/js/13.dd91d8f5.js"><link rel="prefetch" href="/assets/js/14.a621ceac.js"><link rel="prefetch" href="/assets/js/15.ad3aee55.js"><link rel="prefetch" href="/assets/js/16.7970749b.js"><link rel="prefetch" href="/assets/js/18.1fe75540.js"><link rel="prefetch" href="/assets/js/19.0c5bd26b.js"><link rel="prefetch" href="/assets/js/2.45113de2.js"><link rel="prefetch" href="/assets/js/20.ec4acfac.js"><link rel="prefetch" href="/assets/js/21.1e0b9fa7.js"><link rel="prefetch" href="/assets/js/22.0f634031.js"><link rel="prefetch" href="/assets/js/23.c4ff9424.js"><link rel="prefetch" href="/assets/js/24.6febaf73.js"><link rel="prefetch" href="/assets/js/25.49be9a43.js"><link rel="prefetch" href="/assets/js/26.8a9a71ec.js"><link rel="prefetch" href="/assets/js/27.17146263.js"><link rel="prefetch" href="/assets/js/28.e0a2e3c6.js"><link rel="prefetch" href="/assets/js/29.dc94d080.js"><link rel="prefetch" href="/assets/js/3.3d736d2f.js"><link rel="prefetch" href="/assets/js/30.f72dd6e2.js"><link rel="prefetch" href="/assets/js/31.42ec33bb.js"><link rel="prefetch" href="/assets/js/32.e00a4c90.js"><link rel="prefetch" href="/assets/js/33.cf1f4856.js"><link rel="prefetch" href="/assets/js/34.f8c9eb5c.js"><link rel="prefetch" href="/assets/js/35.b629392d.js"><link rel="prefetch" href="/assets/js/36.ae67625f.js"><link rel="prefetch" href="/assets/js/37.34e4a8dd.js"><link rel="prefetch" href="/assets/js/38.aa0e663a.js"><link rel="prefetch" href="/assets/js/39.3764f79c.js"><link rel="prefetch" href="/assets/js/4.1ac1a89c.js"><link rel="prefetch" href="/assets/js/40.6372fb99.js"><link rel="prefetch" href="/assets/js/5.6477920e.js"><link rel="prefetch" href="/assets/js/6.d0ca8e10.js"><link rel="prefetch" href="/assets/js/7.908bb025.js"><link rel="prefetch" href="/assets/js/8.53a275f3.js"><link rel="prefetch" href="/assets/js/9.bffbc9ba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7a8c588f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Dai's blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/JS-interview/interview.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">JS核心面试</a></li><li class="dropdown-item"><!----> <a href="/JS/JS-handwriting/handwriting.html" class="nav-link">JS核心手写</a></li><li class="dropdown-item"><!----> <a href="/JS/Promise/promise.html" class="nav-link">Promise面试题</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSS/CSS-interview/interview.html" class="nav-link">CSS核心面试</a></li><li class="dropdown-item"><!----> <a href="/CSS/CSS-layout/layout.html" class="nav-link">CSS常见布局</a></li><li class="dropdown-item"><!----> <a href="/CSS/CSS-flex/flex.html" class="nav-link">Flex布局</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue-basic/basic.html" class="nav-link">vue2.0基础</a></li><li class="dropdown-item"><!----> <a href="/vue/vue-advanced/advanced.html" class="nav-link">vue2.0进阶</a></li><li class="dropdown-item"><!----> <a href="/vue/vue-interview/interview.html" class="nav-link">vue核心面试</a></li><li class="dropdown-item"><!----> <a href="/vue/sourceCode/intro/intro.html" class="nav-link">vue源码解析</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/webpack/webpack_basic.html" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/other/typeScript/base.html" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/other/git/git.html" class="nav-link">Git 操作</a></li><li class="dropdown-item"><!----> <a href="/other/network/http.html" class="nav-link">计算机网络</a></li></ul></div></div><div class="nav-item"><a href="http://dairuining.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  music
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">JS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/JS/JS-interview/interview.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">JS核心面试</a></li><li class="dropdown-item"><!----> <a href="/JS/JS-handwriting/handwriting.html" class="nav-link">JS核心手写</a></li><li class="dropdown-item"><!----> <a href="/JS/Promise/promise.html" class="nav-link">Promise面试题</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">CSS</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/CSS/CSS-interview/interview.html" class="nav-link">CSS核心面试</a></li><li class="dropdown-item"><!----> <a href="/CSS/CSS-layout/layout.html" class="nav-link">CSS常见布局</a></li><li class="dropdown-item"><!----> <a href="/CSS/CSS-flex/flex.html" class="nav-link">Flex布局</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue-basic/basic.html" class="nav-link">vue2.0基础</a></li><li class="dropdown-item"><!----> <a href="/vue/vue-advanced/advanced.html" class="nav-link">vue2.0进阶</a></li><li class="dropdown-item"><!----> <a href="/vue/vue-interview/interview.html" class="nav-link">vue核心面试</a></li><li class="dropdown-item"><!----> <a href="/vue/sourceCode/intro/intro.html" class="nav-link">vue源码解析</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">算法</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/webpack/webpack_basic.html" class="nav-link">Webpack</a></li><li class="dropdown-item"><!----> <a href="/other/typeScript/base.html" class="nav-link">TypeScript</a></li><li class="dropdown-item"><!----> <a href="/other/git/git.html" class="nav-link">Git 操作</a></li><li class="dropdown-item"><!----> <a href="/other/network/http.html" class="nav-link">计算机网络</a></li></ul></div></div><div class="nav-item"><a href="http://dairuining.top/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  music
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>JS 核心面试</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/JS/JS-interview/interview.html#_1、内置函数" class="sidebar-link">1、内置函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、js-数据类型有哪些？" class="sidebar-link">1、JS 数据类型有哪些？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、基本包装类型（强类型转换）" class="sidebar-link">2、基本包装类型（强类型转换）</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、typeof-null-object" class="sidebar-link">3、typeof null === 'object'</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4、js-数据类型检测" class="sidebar-link">4、JS 数据类型检测</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_2、es6" class="sidebar-link">2、ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、什么是-es-module-？" class="sidebar-link">1、什么是 ES Module ？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、es-module-解决了什么问题？" class="sidebar-link">2、ES Module 解决了什么问题？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、esmodule-和-commonjs-有什么不同？" class="sidebar-link">3、ESModule 和 ComｍonJS 有什么不同？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4、es6-的新特性" class="sidebar-link">4、ES6 的新特性</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_5、var、let、const-的区别？" class="sidebar-link">5、var、let、const 的区别？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_6、箭头函数和普通函数的区别？" class="sidebar-link">6、箭头函数和普通函数的区别？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_7、什么时-itarator-默认部署了iterator-的方法有哪些" class="sidebar-link">7、什么时 itarator? 默认部署了iterator 的方法有哪些?</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_3、执行上下文-作用域链-闭包" class="sidebar-link">3、执行上下文 / 作用域链 / 闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、介绍一下-javascript-的执行上下文和执行栈" class="sidebar-link">1、介绍一下 JavaScript 的执行上下文和执行栈</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、介绍一下-javascript-的作用域和作用域链" class="sidebar-link">2、介绍一下 JavaScript 的作用域和作用域链</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、介绍一下-javascript-的闭包以及已经运用的场景" class="sidebar-link">3、介绍一下 JavaScript 的闭包以及已经运用的场景</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_4、变量提升" class="sidebar-link">4、变量提升</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_5、原型-原型链" class="sidebar-link">5、原型/原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、介绍一下-javascript-的原型" class="sidebar-link">1、介绍一下 JavaScript 的原型</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、原型链是什么" class="sidebar-link">2、原型链是什么</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、什么是原型继承？" class="sidebar-link">3、什么是原型继承？</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_6、prototype-和-proto-区别是什么？" class="sidebar-link">6、prototype 和 _proto_ 区别是什么？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_7、settimeout倒计时出现误差？" class="sidebar-link">7、setTimeout倒计时出现误差？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_8、继承方式" class="sidebar-link">8、继承方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、什么是继承" class="sidebar-link">1、什么是继承</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、6-种继承方式" class="sidebar-link">2、6 种继承方式</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_9、es6-中的-class-和-es5-的类有什么区别？" class="sidebar-link">9、ES6 中的 class 和 ES5 的类有什么区别？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_10、原生-ajax" class="sidebar-link">10、原生 Ajax</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_11、this-指向" class="sidebar-link">11、this 指向</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_12、如何正确的判断this-箭头函数的this是什么？" class="sidebar-link">12、如何正确的判断this? 箭头函数的this是什么？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_13、new-具体做了什么" class="sidebar-link">13、new 具体做了什么</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_14、js有哪些⽅法定义对象" class="sidebar-link">14、js有哪些⽅法定义对象</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_15、说说你对promise的了解" class="sidebar-link">15、说说你对promise的了解</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_16、js延迟加载的⽅式有哪些" class="sidebar-link">16、js延迟加载的⽅式有哪些</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_17、defer和async" class="sidebar-link">17、defer和async</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_18、怎么判断两个对象相等？" class="sidebar-link">18、怎么判断两个对象相等？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_19、如何解决跨域问题" class="sidebar-link">19、如何解决跨域问题?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、通过-jsonp-跨域" class="sidebar-link">1、通过 jsonp 跨域</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、cors" class="sidebar-link">2、CORS</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、node-正向代理" class="sidebar-link">3、Node 正向代理</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4、document-domain-iframe跨域" class="sidebar-link">4、document.domain + iframe跨域</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_5、nginx代理跨域" class="sidebar-link">5、nginx代理跨域</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_20、那些操作会造成内存泄漏？" class="sidebar-link">20、那些操作会造成内存泄漏？</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_21、打乱数组" class="sidebar-link">21、打乱数组</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_22、promise" class="sidebar-link">22、Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、promise是什么" class="sidebar-link">1、Promise是什么</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、如何实现一个promise（promise-a-）" class="sidebar-link">2、如何实现一个Promise（Promise A+）</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、宏任务与微任务以及执行顺序？" class="sidebar-link">3、宏任务与微任务以及执行顺序？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4、javascript-的异步解决方案" class="sidebar-link">4、JavaScript 的异步解决方案</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_5、如何实现promise-all" class="sidebar-link">5、如何实现Promise.all</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_6、如何实现promise-any" class="sidebar-link">6、如何实现Promise.any</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_23、深浅拷贝" class="sidebar-link">23、深浅拷贝</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1-介绍一下javascript的深浅拷贝" class="sidebar-link">1. 介绍一下JavaScript的深浅拷贝</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2-如何实现浅拷贝" class="sidebar-link">2. 如何实现浅拷贝</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3-如何实现深拷贝" class="sidebar-link">3. 如何实现深拷贝</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4-如何解决循环引用的问题" class="sidebar-link">4. 如何解决循环引用的问题</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_24、节流与防抖" class="sidebar-link">24、节流与防抖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、介绍一下什么是节流和防抖" class="sidebar-link">1、介绍一下什么是节流和防抖</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、如何实现节流和防抖" class="sidebar-link">2、如何实现节流和防抖</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、防抖和节流的相同点和不同点" class="sidebar-link">3、防抖和节流的相同点和不同点</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4、介绍一下节流和防抖的运用场景" class="sidebar-link">4、介绍一下节流和防抖的运用场景</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_25、事件机制-event-loop" class="sidebar-link">25、事件机制 / Event Loop</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、什么是单线程？" class="sidebar-link">1、什么是单线程？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、介绍一下事件循环" class="sidebar-link">2、介绍一下事件循环</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、为什么-js-有事件循环机制" class="sidebar-link">3、为什么 JS 有事件循环机制</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4-只有宏任务不行？为什么引入微任务" class="sidebar-link">4. 只有宏任务不行？为什么引入微任务</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_5、node-中的事件循环和浏览器中的事件循环有什么区别？" class="sidebar-link">5、Node 中的事件循环和浏览器中的事件循环有什么区别？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_6、宏任务与微任务有什么区别" class="sidebar-link">6、宏任务与微任务有什么区别</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_26、事件的捕获与冒泡" class="sidebar-link">26、事件的捕获与冒泡</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_1、基本概念" class="sidebar-link">1、基本概念</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_2、dom-事件流的三个阶段" class="sidebar-link">2、DOM 事件流的三个阶段</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_3、window-addeventlistener-监听的是什么阶段的事件？" class="sidebar-link">3、window.addEventListener 监听的是什么阶段的事件？</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_4、window-removeeventlistener" class="sidebar-link">4、window.removeEventListener()</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_5、什么是事件代理（事件委托）" class="sidebar-link">5、什么是事件代理（事件委托）</a></li><li class="sidebar-sub-header"><a href="/JS/JS-interview/interview.html#_6、如何阻止冒泡事件和默认事件" class="sidebar-link">6、如何阻止冒泡事件和默认事件</a></li></ul></li><li><a href="/JS/JS-interview/interview.html#_27、柯里化" class="sidebar-link">27、柯里化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/JS/JS-interview/interview.html#_28、数组常用方法" class="sidebar-link">28、数组常用方法</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="js-核心面试"><a href="#js-核心面试" class="header-anchor">#</a> JS 核心面试</h1> <h2 id="_1、内置函数"><a href="#_1、内置函数" class="header-anchor">#</a> 1、内置函数</h2> <h3 id="_1、js-数据类型有哪些？"><a href="#_1、js-数据类型有哪些？" class="header-anchor">#</a> 1、JS 数据类型有哪些？</h3> <p><strong>JS</strong> 一共有 <code>8</code> 种数据类型：<code>undefined</code>、<code>null</code>、<code>boolean</code>、<code>string</code>、<code>number</code>、<code>bigInt</code>、<code>symbol</code>、<code>object</code>
其中 JS 数据类型可分为<strong>基础数据类型</strong>和<strong>引用数据类型</strong>。</p> <p><strong>基础数据类型</strong>有：<code>undefined</code>、<code>null</code>、<code>boolean</code>、<code>string</code>、<code>number</code>、<code>bigInt</code>、<code>symbol</code>
基本数据类型存储在<code>栈内存</code>中</p> <p><strong>引用数据类型</strong>：<code>Object</code>   =&gt; (<code>Object</code> 子类型)内置函数：<code>Array</code>、<code>Function</code>、<code>RegExp</code>、<code>Date</code>
引用数据类型存储在<code>堆内存</code>中</p> <h3 id="_2、基本包装类型（强类型转换）"><a href="#_2、基本包装类型（强类型转换）" class="header-anchor">#</a> 2、基本包装类型（强类型转换）</h3> <h4 id="介绍-js-有哪些内置对象"><a href="#介绍-js-有哪些内置对象" class="header-anchor">#</a> 介绍 JS 有哪些内置对象</h4> <ul><li><code>Object</code> 是 <code>JavaScript</code> 中所有对象的⽗对象</li> <li>数据封装类对象： <code>Object</code> 、 <code>Array</code> 、 <code>Boolean</code> 、 <code>Number</code> 和 <code>String</code></li> <li>其他对象： <code>Function</code> 、 <code>Arguments</code> 、 <code>Math</code> 、 <code>Date</code> 、 <code>RegExp</code> 、 <code>Error</code></li></ul> <p>基本包装类型分别有：<code>Boolean</code>、<code>String</code>、<code>Number</code>、<code>parseInt</code>、<code>parseFloat</code></p> <p><strong>1. Boolean</strong></p> <p>规则：</p> <ul><li>转换为 <strong>false</strong>: <code>false</code>、<code>&quot;&quot;</code>、<code>0</code>、<code>NaN</code>、<code>null</code>、<code>undefined</code>，其他都为 <strong>true</strong></li> <li>判断 <strong>NaN</strong>：1. <code>isNaN(NaN)</code> // true，其他都为 false;   2. <code>Object.is(NaN, NaN)</code> // true</li></ul> <p><strong>2. Number</strong></p> <p>规则：</p> <ul><li><ol><li>布尔值，<code>true</code> 转换为 <code>1</code>，<code>false</code> 转换为 <code>0</code>；</li></ol></li> <li><ol start="2"><li>数值，直接返回；</li></ol></li> <li><ol start="3"><li><code>null</code>，返回 <code>0</code>；</li></ol></li> <li><ol start="4"><li><code>undefined</code>，返回 <code>NaN</code>；</li></ol></li> <li><ol start="5"><li>字符串，如果字符串是数值，忽略前面的 <code>0</code>，转换为十进制，如果字符串是浮点值，则转换为相应的浮点值。如果字符串是十六进制格式，则将其转换为十进制；如果是空字符串，则返回 <code>0</code>，其他情况，返回 <code>NaN</code>;</li></ol></li> <li><ol start="6"><li>对象，调用 <code>valueOf()</code>方法，如果返回的是原始值就直接返回，如果不是则调用 <code>toString()</code> 方法，再按照 <code>Object.prototype.toString.call()</code> 的返回结果进行。</li></ol></li></ul> <p><strong>3. parseInt</strong></p> <p>更专注于字符串是否包含数值模式。
字符串最前面的空格会被忽略，从第一个非空字符串开始转换。
如果第一个字符不是数值字符、加号和减号，parseInt() 即刻返回 NaN</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;1234blue&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 1234</span>
<span class="token number">2.</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
<span class="token number">3.</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;0xA&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 10</span>
<span class="token number">4.</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;22.5&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 22</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>4. parseFloat</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;1234blue&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 1234</span>
<span class="token number">2.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;0xA&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 0</span>
<span class="token number">3.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;22.5&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 22.5</span>
<span class="token number">4.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;22.34.5&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 22.34</span>
<span class="token number">5.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;0908.5&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 908.5</span>
<span class="token number">6.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">&quot;3.125e7&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 31250000</span>
<span class="token number">7.</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>5. String</strong></p> <ul><li><ol><li>如果是对象，则调用这个对象的 <code>toString()</code> 方法，如果 <code>toString()</code> 方法返回的是一个原始值，则返回这个原始值。 否则，如果输入的值是一个对象，则调用该对象的 <code>valueOf()</code> 方法， 如果 valueOf() 方法的返回值是一个原始值，则返回这个原始值。</li></ol></li> <li><ol start="2"><li>如果值是 <code>null</code>，返回 <code>&quot;null&quot;</code></li></ol></li> <li><ol start="3"><li>如果值是 <code>undefined</code>，返回 <code>&quot;undefined&quot;</code></li></ol></li></ul> <p><strong>例子：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">?</span>
两个对象的值进行<span class="token operator">+</span>运算符，肯定要先进行隐式转换为原始类型才能进行计算。
<span class="token number">1</span>、进行ToPrimitive转换，由于没有指定PreferredType类型，<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">会使默认值为Number，进行ToPrimitive</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> Number<span class="token punctuation">)</span>运算。
<span class="token number">2</span><span class="token function">、所以会执行valueOf方法，</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>返回的还是<span class="token punctuation">{</span><span class="token punctuation">}</span>对象，不是原始值。
<span class="token number">3</span><span class="token function">、继续执行toString方法，</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>返回<span class="token string">&quot;[object Object]&quot;</span>，是原始值。
故得到最终的结果，<span class="token string">&quot;[object Object]&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;[object Object]&quot;</span> <span class="token operator">=</span> <span class="token string">&quot;[object Object][object Object]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">?</span>
<span class="token number">1</span>、首先<span class="token operator">*</span>运算符只能对number类型进行运算，故第一步就是对<span class="token punctuation">{</span><span class="token punctuation">}</span>进行ToNumber类型转换。
<span class="token number">2</span>、由于<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">是对象类型，故先进行原始类型转换，ToPrimitive</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> Number<span class="token punctuation">)</span>运算。
<span class="token number">3</span><span class="token function">、所以会执行valueOf方法，</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>返回的还是<span class="token punctuation">{</span><span class="token punctuation">}</span>对象，不是原始值。
<span class="token number">4</span><span class="token function">、继续执行toString方法，</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>返回<span class="token string">&quot;[object Object]&quot;</span>，是原始值。
<span class="token number">5</span>、转换为原始值后再进行ToNumber运算，<span class="token string">&quot;[object Object]&quot;</span>就转换为<span class="token number">NaN</span>。
故最终的结果为 <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">NaN</span> <span class="token operator">=</span> <span class="token number">NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>6. == 运算符隐式转换</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>比较运算 x<span class="token operator">==</span>y<span class="token punctuation">,</span> 其中 x 和 y 是值，返回 <span class="token boolean">true</span> 或者 <span class="token boolean">false</span>。这样的比较按如下方式进行：

<span class="token number">1</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 与 <span class="token function">Type</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 相同， 则
    <span class="token number">1</span><span class="token operator">*</span> 若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Undefined， 返回 <span class="token boolean">true</span>。
    <span class="token number">2</span><span class="token operator">*</span> 若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Null， 返回 <span class="token boolean">true</span>。
    <span class="token number">3</span><span class="token operator">*</span> 若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Number， <span class="token function">则</span>
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>、若 x 为 <span class="token number">NaN</span>， 返回 <span class="token boolean">false</span><span class="token function">。</span>
        <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>、若 y 为 <span class="token number">NaN</span>， 返回 <span class="token boolean">false</span><span class="token function">。</span>
        <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>、若 x 与 y 为相等数值， 返回 <span class="token boolean">true</span><span class="token function">。</span>
        <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>、若 x 为 <span class="token operator">+</span><span class="token number">0</span> 且 y 为 −<span class="token number">0</span>， 返回 <span class="token boolean">true</span><span class="token function">。</span>
        <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>、若 x 为 −<span class="token number">0</span> 且 y 为 <span class="token operator">+</span><span class="token number">0</span>， 返回 <span class="token boolean">true</span><span class="token function">。</span>
        <span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>、返回 <span class="token boolean">false</span>。
    <span class="token number">4</span><span class="token operator">*</span> 若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 String<span class="token punctuation">,</span> 则当 x 和 y 为完全相同的字符序列（长度相等且相同字符在相同位置）时返回 <span class="token boolean">true</span>。 否则， 返回 <span class="token boolean">false</span>。
    <span class="token number">5</span><span class="token operator">*</span> 若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Boolean<span class="token punctuation">,</span> 当 x 和 y 为同为 <span class="token boolean">true</span> 或者同为 <span class="token boolean">false</span> 时返回 <span class="token boolean">true</span>。 否则， 返回 <span class="token boolean">false</span>。
    <span class="token number">6</span><span class="token operator">*</span>  当 x 和 y 为引用同一对象时返回 <span class="token boolean">true</span>。否则，返回 <span class="token boolean">false</span>。
<span class="token number">2</span>、若 x 为 <span class="token keyword">null</span> 且 y 为 <span class="token keyword">undefined</span>， 返回 <span class="token boolean">true</span>。
<span class="token number">3</span>、若 x 为 <span class="token keyword">undefined</span> 且 y 为 <span class="token keyword">null</span>， 返回 <span class="token boolean">true</span>。
<span class="token number">4</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Number 且 <span class="token function">Type</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 为 String，返回比较 x <span class="token operator">==</span> <span class="token function">ToNumber</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 的结果。
<span class="token number">5</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 String 且 <span class="token function">Type</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 为 Number，返回比较 <span class="token function">ToNumber</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> y 的结果。
<span class="token number">6</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Boolean， 返回比较 <span class="token function">ToNumber</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> y 的结果。
<span class="token number">7</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 为 Boolean， 返回比较 x <span class="token operator">==</span> <span class="token function">ToNumber</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 的结果。
<span class="token number">8</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 String 或 Number，且 <span class="token function">Type</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 为 Object，返回比较 x <span class="token operator">==</span> <span class="token function">ToPrimitive</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 的结果。
<span class="token number">9</span>、若 <span class="token function">Type</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> 为 Object 且 <span class="token function">Type</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> 为 String 或 Number， 返回比较 <span class="token function">ToPrimitive</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">==</span> y 的结果。
<span class="token number">10</span>、返回 <span class="token boolean">false</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><strong>例子：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">valueOf</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token string">'123'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token boolean">true</span> <span class="token operator">==</span> a <span class="token comment">// true;</span>
首先，x与y类型不同，x为boolean类型，则进行ToNumber转换为<span class="token number">1</span><span class="token punctuation">,</span>为number类型。
<span class="token function">接着，x为number，y为object类型，对y进行原始转换，ToPrimitive</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">)</span><span class="token punctuation">,</span>没有指定转换类型，默认number类型。
<span class="token function">而后，ToPrimitive</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> Number<span class="token punctuation">)</span>首先调用valueOf方法，返回<span class="token number">1</span>，得到原始类型<span class="token number">1</span>。
最后 <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span>， 返回<span class="token boolean">true</span>。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//</span>
<span class="token number">1</span>、<span class="token operator">!</span> 运算符优先级高于<span class="token operator">==</span>，故先进行！运算。
<span class="token number">2</span>、<span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span>运算结果为<span class="token boolean">false</span>，结果变成 <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span>比较。
<span class="token number">3</span>、根据上面第<span class="token number">7</span>条，等式右边y <span class="token operator">=</span> <span class="token function">ToNumber</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>。结果变成 <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span>。
<span class="token number">4</span><span class="token function">、按照上面第9条，比较变成ToPrimitive</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span>。
    按照上面规则进行原始值转换，<span class="token punctuation">[</span><span class="token punctuation">]</span>会先调用valueOf函数，返回<span class="token keyword">this</span>。
   不是原始值，继续调用toString方法，x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">''</span>。
   故结果为 <span class="token string">''</span> <span class="token operator">==</span> <span class="token number">0</span>比较。
<span class="token number">5</span>、根据上面第<span class="token number">5</span>条，等式左边x <span class="token operator">=</span> <span class="token function">ToNumber</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span>。
   所以结果变为： <span class="token number">0</span> <span class="token operator">==</span> <span class="token number">0</span>，返回<span class="token boolean">true</span>，比较结束。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  i<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token function-variable function">toString</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a<span class="token punctuation">.</span>i<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">1</span>、当执行a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span> 时，会从左到右一步一步解析，首先 a <span class="token operator">==</span>  <span class="token number">1</span><span class="token function">，会进行上面第9步转换。ToPrimitive</span><span class="token punctuation">(</span>a， Number<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span>。
<span class="token number">2</span><span class="token function">、ToPrimitive</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> Number<span class="token punctuation">)</span><span class="token class-name">，按照上面原始类型转换规则，会先调用valueOf方法，a的valueOf方法继承自Object</span><span class="token punctuation">.</span>prototype。返回a本身，而非原始类型，故会调用toString方法。
<span class="token number">3</span>、因为toString被重写，所以会调用重写的toString方法，故返回<span class="token number">1</span>，注意这里是i<span class="token operator">++</span>，而不是<span class="token operator">++</span>i，它会先返回i，在将i<span class="token operator">+</span><span class="token number">1</span><span class="token function">。故ToPrimitive</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> Number<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">1</span>。也就是<span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1</span>，此时i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">2</span>。
<span class="token number">4</span>、执行完a <span class="token operator">==</span> <span class="token number">1</span>返回<span class="token boolean">true</span>，会执行a <span class="token operator">==</span> <span class="token number">2</span><span class="token function">，同理，会调用ToPrimitive</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> Number<span class="token punctuation">)</span>，同上先调用valueOf方法，在调用toString方法，由于第一步，i <span class="token operator">=</span> <span class="token number">2</span><span class="token function">此时，ToPrimitive</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> Number<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span>， 也就是<span class="token number">2</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">,</span> 此时i <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span>。
<span class="token number">5</span>、同上可以推导 a <span class="token operator">==</span> <span class="token number">3</span>也返回<span class="token boolean">true</span>。故最终结果 a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span>返回<span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3、typeof-null-object"><a href="#_3、typeof-null-object" class="header-anchor">#</a> 3、typeof null === 'object'</h3> <p>不同的对象在底层都表示一个二进制，在 <code>JavaScript</code> 中二进制前三位都为 <code>0</code>，会被判别为 <code>Object</code>，而 <code>null</code> 的二进制表示全 <code>0</code>，自然前三位也是 <code>0</code>，所以 <code>typeof null === 'object'</code></p> <ul><li>1：整型（int）</li> <li>000：引用类型（object）</li> <li>010：双精度浮点型（double）</li> <li>100：字符串（string）</li> <li>110：布尔型（boolean）</li></ul> <h3 id="_4、js-数据类型检测"><a href="#_4、js-数据类型检测" class="header-anchor">#</a> 4、JS 数据类型检测</h3> <p><strong>1. typeof</strong></p> <p>可以判断的类型有：<code>undefined</code>, <code>boolean</code>, <code>string</code>, <code>number</code>, <code>object</code>, <code>symbol</code>, <code>bigInt</code>, <code>function</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined </span>
<span class="token number">2.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object </span>
<span class="token number">3.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// boolean </span>
<span class="token number">4.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// number </span>
<span class="token number">4.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token number">123n</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// bigInt </span>
<span class="token number">5.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string </span>
<span class="token number">6.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object </span>
<span class="token number">7.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object </span>
<span class="token number">8.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// function </span>
<span class="token number">9.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object </span>
<span class="token number">10.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object </span>
<span class="token number">11.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object </span>
<span class="token number">12.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// object</span>
<span class="token number">13.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// symbol</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>2. instanceof</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token comment">// true</span>
<span class="token number">2.</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>3. Object.prototype.toString.call()</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
<span class="token number">2.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
<span class="token number">3.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Boolean]</span>
<span class="token number">4.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Number]</span>
<span class="token number">5.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object String]</span>
<span class="token number">6.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Object]</span>
<span class="token number">7.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Array]</span>
<span class="token number">8.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Function]</span>
<span class="token number">9.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Date]</span>
<span class="token number">10.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object RegExp]</span>
<span class="token number">11.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Error]</span>
<span class="token number">12.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Arguments]</span>
<span class="token number">13.</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// [object Symbol]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>4. 判断数组的方法</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span>
<span class="token number">2.</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token number">3.</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Array]&quot;</span>
<span class="token number">4.</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token number">5.</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype
<span class="token number">6.</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>5. 0.1+0.2 !== 0.3</strong></p> <p><code>JavaScript</code> 通过 <code>Number</code> 类型表示数字（整数和浮点数），并且通过 <code>64</code> 位的二进制来表示一个数字，在转换成二进制的时候尾数会发生无限循环，然后进行对阶运算，<code>JS</code> 引擎对二进制进行截断，所以造成精度丢失。</p> <p>解决：引入一个这么小的量，目的在于为浮点数计算设置一个误差范围，如果误差能够小于 <code>Number.EPSILON</code>，我们就可以认为结果是可靠的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法一：</span>
<span class="token keyword">function</span> <span class="token function">withinErrorMargin</span> <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>left <span class="token operator">-</span> right<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span>
<span class="token punctuation">}</span>
<span class="token function">withinErrorMargin</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token operator">+</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span>
<span class="token comment">// 方法二</span>
<span class="token keyword">function</span> <span class="token function">withinErrorMargin</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">Number</span><span class="token punctuation">(</span>left<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> right
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>案例：对两数相加而不会出现精度问题</p> <p><strong>方法一：自己封装</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> num1Digits <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
 <span class="token keyword">const</span> num2Digits <span class="token operator">=</span> <span class="token punctuation">(</span>num2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
 <span class="token keyword">const</span> baseNum <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>num1Digits<span class="token punctuation">,</span> num2Digits<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token punctuation">(</span>num1 <span class="token operator">*</span> baseNum <span class="token operator">+</span> num2 <span class="token operator">*</span> baseNum<span class="token punctuation">)</span> <span class="token operator">/</span> baseNum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>方法二：使用 Math.js 或 big.js 库</strong></p> <ul><li><a href="mathjs.org">Math.js 官网</a></li> <li><a href="mikemcl.github.io/big.js">big.js 官网</a></li></ul> <h2 id="_2、es6"><a href="#_2、es6" class="header-anchor">#</a> 2、ES6</h2> <h3 id="_1、什么是-es-module-？"><a href="#_1、什么是-es-module-？" class="header-anchor">#</a> 1、什么是 ES Module ？</h3> <p><code>ES Module</code> 是 <code>ES6</code> 推出的静态导入导出方式，在 <code>ES Module</code> 中导出方式分为两种，单个导出(<code>export</code>)、默认导出(<code>export default</code>)，单个导出可以导出我想要的值，默认导出就是全部导出。
在 <code>ES Module</code> 中的导入方式分为两种，单个导入和全部导入，并且都使用 <code>import</code> 语法。如果要单个导入则必须使用花括号 <code>{ }</code>，如果全部导入则不用。</p> <h3 id="_2、es-module-解决了什么问题？"><a href="#_2、es-module-解决了什么问题？" class="header-anchor">#</a> 2、ES Module 解决了什么问题？</h3> <p><code>ES Module</code> 解决了<strong>变量污染</strong>问题，<strong>依赖顺序</strong>问题，<code>ES Module</code> 语法也是更加灵活，导出值也都是导出的引用，导出变量是可读状态，这加强了代码可读性。</p> <h3 id="_3、esmodule-和-commonjs-有什么不同？"><a href="#_3、esmodule-和-commonjs-有什么不同？" class="header-anchor">#</a> 3、ESModule 和 ComｍonJS 有什么不同？</h3> <p><strong>CommonJS</strong></p> <ul><li><code>CommonJS</code> 可以动态加载语句，代码发生在<strong>运行时</strong></li> <li><code>CommonJS</code> 混合导出，当导出引用对象时之前的导出就被覆盖了</li> <li><code>CommonJS</code> 导出值是拷贝，可以修改导出的值，这在代码出错时，不好排查引起变量污染</li> <li><code>CommonJS</code> 的通过对 <code>module.exports</code> 或 <code>exports</code> 对模块进行导出</li></ul> <p><strong>ES Module</strong></p> <ul><li><code>ES Module</code> 是静态的，不可以动态加载语句，只能声明在该文件的最顶部，代码发生在<strong>编译时</strong></li> <li><code>ES Module</code> 混合导出，单个导出，默认导出，完全互不影响</li> <li><code>ES Module</code> 导出是引用值，并且值都是可读的，不能修改</li> <li><code>ES Module</code> 通过对 <code>export default</code> 或 <code>export</code> 对模块进行导出</li></ul> <h3 id="_4、es6-的新特性"><a href="#_4、es6-的新特性" class="header-anchor">#</a> 4、ES6 的新特性</h3> <p><code>let</code>、<code>const</code>、<code>import/export</code>、<code>new Set</code>、<code>new Map</code>、<code>class</code>(创建类)、展开运算符(...arr)、模板字符串(<code>${}</code>)、
解构赋值、<code>for of</code> 、箭头函数(<code>()=&gt;{}</code>)、<code>Symbol</code>(唯一的值)、<code>promise</code>、<code>async/await</code>、数组新增的方法（<code>flat</code>、<code>find</code>、<code>findIndex</code>）
对象新增方法（<code>Object.assign()</code>、<code>Object.is()</code>、<code>Object.values()</code>、<code>Object.keys()</code>、<code>Object.entries()</code>、<code>Object.create()</code>...）</p> <h3 id="_5、var、let、const-的区别？"><a href="#_5、var、let、const-的区别？" class="header-anchor">#</a> 5、var、let、const 的区别？</h3> <ul><li><ol><li><code>let</code> 和 <code>const</code> 声明变量时不存在变量提升，即如果需要使用该变量，需要声明后使用</li></ol></li> <li><ol start="2"><li><code>let</code> 和 <code>const</code> 不能重复声明变量，如果重复声明会报错</li></ol></li> <li><ol start="3"><li><code>let</code> 和 <code>const</code> 在全局声明变量不会给 <code>window</code> 增加属性</li></ol></li> <li><ol start="4"><li><code>let</code> 和 <code>const</code> 出现在代码块中，会把代码块变成块级作用域，并且出现暂时性死区</li></ol></li></ul> <h3 id="_6、箭头函数和普通函数的区别？"><a href="#_6、箭头函数和普通函数的区别？" class="header-anchor">#</a> 6、箭头函数和普通函数的区别？</h3> <ul><li><ol><li>箭头函数是匿名函数，不能作为构造函数来使用，不能 <code>new</code></li></ol></li> <li><ol start="2"><li>箭头函数没有原型属性（<code>prototype</code>）</li></ol></li> <li><ol start="3"><li><code>this</code> 指向不同，箭头函数指向最靠近的函数的 <code>this</code></li></ol></li> <li><ol start="4"><li>不可以使用 <code>arguments</code> 对象，该函数体内不存在</li></ol></li></ul> <h3 id="_7、什么时-itarator-默认部署了iterator-的方法有哪些"><a href="#_7、什么时-itarator-默认部署了iterator-的方法有哪些" class="header-anchor">#</a> 7、什么时 itarator? 默认部署了iterator 的方法有哪些?</h3> <p>对于可迭代的数据解构，ES6在内部部署了一个 [Symbol.iterator] 属性，它是一个函数，执行后会返回iterator对象
（也叫迭代器对象），而生成iterator对象 [Symbol.iterator] 属性叫iterator接口,有这个接口的数据结构即被视为可迭代的</p> <p><strong>部署的方法有：</strong><br> <code>Array</code>、<code>Map</code>、<code>Set</code>、<code>String</code>、<code>TypedArray（类数组）</code>、<code>函数的 arguments 对象</code>、<code>NodeList 对象</code></p> <h2 id="_3、执行上下文-作用域链-闭包"><a href="#_3、执行上下文-作用域链-闭包" class="header-anchor">#</a> 3、执行上下文 / 作用域链 / 闭包</h2> <h3 id="_1、介绍一下-javascript-的执行上下文和执行栈"><a href="#_1、介绍一下-javascript-的执行上下文和执行栈" class="header-anchor">#</a> 1、介绍一下 JavaScript 的执行上下文和执行栈</h3> <p>参考：https://juejin.cn/post/6844903682283143181     https://github.com/mqyqingfeng/Blog/issues/4</p> <p>1.执行上下文的概念？</p> <p>答：执行上下文是评估和执行 <code>JavaScript</code> 代码的环境的抽象概念。</p> <p>2.执行上下文的种类？</p> <p>答：全局执行上下文、函数执行上下文和 <code>eval</code> 函数执行上下文。</p> <p>3.什么是执行栈？</p> <p>答：执行栈是一种后入先出的数据结构的栈，被用来储存代码时创建的所有的执行上下文。</p> <h3 id="_2、介绍一下-javascript-的作用域和作用域链"><a href="#_2、介绍一下-javascript-的作用域和作用域链" class="header-anchor">#</a> 2、介绍一下 JavaScript 的作用域和作用域链</h3> <p><strong>2.1 作用域</strong><br>
作用域是源代码中定义变量的区域。ES5 中存在作用域有：全局作用域、函数作用域、块级作用域。</p> <p><strong>2.2 作用域链</strong></p> <ul><li>作用域链在查找变量的时候会从当前的上下文的变量对象中查找，如果没有找到，则会从父级执行上下文中查找，一直找到全局上下文的变量对象，也就是全局对象，这样由多个执行上下文的变量对象构成的链表叫做作用域链。</li></ul> <h3 id="_3、介绍一下-javascript-的闭包以及已经运用的场景"><a href="#_3、介绍一下-javascript-的闭包以及已经运用的场景" class="header-anchor">#</a> 3、介绍一下 JavaScript 的闭包以及已经运用的场景</h3> <p><strong>闭包：</strong></p> <p>闭包是一个可以访问外部作用域变量的内部函数，创建闭包的最常⻅的⽅式就是在⼀个函数内创建另⼀个函数， 通过另⼀个函数访问这个函数的局部变量。</p> <p><strong>闭包的本质</strong></p> <p>当前环境中存在指向父级作用域的引用。</p> <p><strong>闭包的特性：</strong></p> <ul><li>函数内再嵌套函数</li> <li>内部函数可以引⽤外层的参数和变量</li> <li>参数和变量不会被垃圾回收机制回收</li></ul> <p><strong>说说你对闭包的理解：</strong></p> <ul><li>使⽤闭包主要是为了设计私有的⽅法和变量。闭包的优点是可以避免全局变量的污染，缺点是闭包会常驻内存，会增⼤内存使⽤量，使⽤不当很容易造成内存泄露。</li> <li>闭包的最⼤⽤处有两个，⼀个是可以读取函数内部的变量，另⼀个就是让这些变量始终保持在内存中</li> <li>闭包的另⼀个⽤处，是封装对象的私有属性和私有⽅法</li> <li>好处：能够实现封装和缓存等；</li> <li>坏处：就是消耗内存、不正当使⽤会造成内存溢出的问题</li></ul> <p><strong>使⽤闭包的注意点：</strong></p> <ul><li>由于闭包会使得函数中的变量都被保存在内存中，内存消耗很⼤，所以不能滥⽤闭包，否则会造成⽹⻚的性能问题，在 IE 中可能导致内存泄露</li> <li>解决⽅法是，在退出函数之前，将不使⽤的局部变量全部删除</li></ul> <p><strong>运用场景：</strong></p> <ul><li>封装私有变量</li> <li>模仿块级作用域(<code>ES5</code> 中没有块级作用域)</li> <li>实现 <code>JS</code> 的模块</li></ul> <p><strong>经典面试题</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出 5 个 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>方法一：闭包</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>方法二：setTimeout 的第三个参数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>方法三：设置一个函数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">function</span> <span class="token function">timeoutFunc</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">timeoutFunc</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>方法四：使用 let</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>方法五：使用 bind</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token function">setTimeout</span><span class="token punctuation">(</span> <span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token operator">*</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_4、变量提升"><a href="#_4、变量提升" class="header-anchor">#</a> 4、变量提升</h2> <p>函数在运行的时候，会首先创建执行上下文，然后将执行上下文入栈，然后当此执行上下文处于栈顶时，开始运行执行上下文。</p> <p>在创建执行上下文的过程中会做三件事：创建变量对象，创建作用域链，确定 <code>this</code> 指向，其中创建变量对象的过程中，首先会为 <code>arguments</code> 创建一个属性，值为 <code>arguments</code>，然后会扫码 <code>function</code> 函数声明，创建一个同名属性，值为函数的引用，接着会扫码 <code>var</code> 变量声明，创建一个同名属性，值为 <code>undefined</code>，这就是变量提升。</p> <h2 id="_5、原型-原型链"><a href="#_5、原型-原型链" class="header-anchor">#</a> 5、原型/原型链</h2> <h3 id="_1、介绍一下-javascript-的原型"><a href="#_1、介绍一下-javascript-的原型" class="header-anchor">#</a> 1、介绍一下 JavaScript 的原型</h3> <p>在 <code>JavaScript</code> 中，每个对象都会在其内部初始化⼀个<code>prototype</code>属性，这个属性指向函数的原型对象。使用原型对象的好处是所有对象实例共享它所包含的属性和方法。</p> <h3 id="_2、原型链是什么"><a href="#_2、原型链是什么" class="header-anchor">#</a> 2、原型链是什么</h3> <p>当对象查找一个属性的时候，如果没有在自身找到，则会查找自身的原型，如果原型还没有找到，那么会继续查找原型的原型，直到找到 <code>Object.prototype</code> 的原型时，此时原型为 <code>null</code>，查找停止。 这种通过原型链接的逐级向上的查找链被称为原型链。</p> <h3 id="_3、什么是原型继承？"><a href="#_3、什么是原型继承？" class="header-anchor">#</a> 3、什么是原型继承？</h3> <p>一个对象可以使用另外一个对象的属性或者方法，就称之为继承。具体是通过将这个对象的原型设置为另外一个对象，这样根据原型链的规则，如果查找一个对象属性且在自身不存在时，就会查找另外一个对象，相当于一个对象可以使用另外一个对象的属性和方法了。</p> <h2 id="_6、prototype-和-proto-区别是什么？"><a href="#_6、prototype-和-proto-区别是什么？" class="header-anchor">#</a> 6、prototype 和 <strong>proto</strong> 区别是什么？</h2> <p><code>prototype</code> 是构造函数的属性，<code>prototype</code> 原型对象里的 <code>constructor</code> 指向构造函数本身。</p> <p><code>__proto__</code> 是每个实例都有的属性，并且指向构造函数的 <code>prototype</code>。</p> <p>实例的 <code>__proto__</code> 与其构造函数的 <code>prototype</code> 指向的是同一个对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Jack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Jack<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// console.log(Object.getPrototypeOf(Jack));;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Jack<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_7、settimeout倒计时出现误差？"><a href="#_7、settimeout倒计时出现误差？" class="header-anchor">#</a> 7、setTimeout倒计时出现误差？</h2> <p><code>setTimeout()</code> 只是将事件插入了“任务队列”，必须等当前代码（执行栈）执行完，主线程才会去执行它指定的回调函数。要是当前代码消耗时间很长，也有可能要等很久，所以并没办法保证回调函数一定会在 <code>setTimeout()</code> 指定的时间执行。所以， <code>setTimeout()</code> 的第二个参数表示的是最少时间，并非是确切时间。</p> <p><code>HTML5</code> 标准规定了 <code>setTimeout()</code> 的第二个参数的最小值不得小于 <code>4</code> 毫秒，如果低于这个值，则默认是 <code>4</code> 毫秒。在此之前。老版本的浏览器都将最短时间设为 <code>10</code> 毫秒。另外，对于那些 <code>DOM</code> 的变动（尤其是涉及页面重新渲染的部分），通常是间隔 <code>16</code> 毫秒执行。这时使用 <code>requestAnimationFrame()</code> 的效果要好于 <code>setTimeout()</code>;</p> <h2 id="_8、继承方式"><a href="#_8、继承方式" class="header-anchor">#</a> 8、继承方式</h2> <h3 id="_1、什么是继承"><a href="#_1、什么是继承" class="header-anchor">#</a> 1、什么是继承</h3> <p>如果一个对象可以使用另外一个对象的属性或者方法就叫继承。</p> <h3 id="_2、6-种继承方式"><a href="#_2、6-种继承方式" class="header-anchor">#</a> 2、6 种继承方式</h3> <div class="tip custom-block"><p class="custom-block-title">1. 原型链继承</p> <p>实现方式：通过将子类原型指向父类的实例来实现的。</p> <ul><li>优点：基本实现子类继承父类</li> <li>问题1：原型中包含的<strong>引用类型属性</strong>将被所有实例共享（不能实现多继承）；</li> <li>问题2：子类在实例化的时候不能给父类构造函数<strong>传参</strong>；</li></ul></div> <div class="tip custom-block"><p class="custom-block-title">2. 构造函数继承</p> <p>实现方式：通过在子类的函数中调用父类的构造函数来实现的。</p> <ul><li>优点：解决了原型链继承出现的两个问题。</li> <li>问题：子类只能继承父类的属性和方法，不能继承父类原型上的属性和方法。</li></ul></div> <div class="tip custom-block"><p class="custom-block-title">3. 组合继承</p> <p>实现方式：将原型链继承和构造函数继承组合在一起的实现方式。</p> <ul><li>优点：解决了原型链继承和构造函数继承单独使用时出现的问题。</li> <li>问题：调用两次父类 第一次是改变子类的 <code>prototype</code> 时，第二次是在子类的函数中调用父类的构造函数。</li></ul></div> <div class="tip custom-block"><p class="custom-block-title">4. 原型式继承</p> <p>实现方式：基于已有的对象来创建新的对象，实现的原理是，向函数中传入一个对象，然后返回一个以这个对象为原型的对象。</p> <ul><li>问题：原型中包含的<strong>引用类型属性</strong>将被所有实例共享（不能实现多继承）；</li></ul></div> <div class="tip custom-block"><p class="custom-block-title">5. 寄生式继承</p> <p>实现方式：通过传入一个对象，然后复制一个对象的副本，并对对象进行扩展，最后返回这个对象。</p> <ul><li>问题：跟原型式继承一样，没有解决引用类型属性被所有实例共享问题（不能实现多继承）。</li></ul></div> <div class="tip custom-block"><p class="custom-block-title">6. 寄生组合式继承</p> <p>实现方式：通过使用父类的原型的副本来作为子类的原型，这样就避免了两次调用父类的情况。</p> <ul><li>优点：解决了上述所有的问题。</li></ul></div> <p><strong>class继承方式：</strong></p> <div class="tip custom-block"><p class="custom-block-title">ES6 class 继承</p> <p>实现方式：通过使用关键字 super 先创建父类的实例对象 this，最后在子类 class 中修改 this。</p> <p>ES5 和 ES6 实现继承的区别：</p> <ul><li>es5继承先创建子类的实例对象，然后再将父类的方法添加到this上（Parent.apply(this)）。</li> <li>es6继承是使用关键字super先创建父类的实例对象this，最后在子类class中修改this。</li></ul></div> <h2 id="_9、es6-中的-class-和-es5-的类有什么区别？"><a href="#_9、es6-中的-class-和-es5-的类有什么区别？" class="header-anchor">#</a> 9、ES6 中的 class 和 ES5 的类有什么区别？</h2> <ul><li><code>class</code> 内部所有定义的方法都是不可枚举的;</li> <li><code>class</code> 必须使用 <code>new</code> 调用;</li> <li><code>class</code> 不存在变量提升;</li> <li><code>class</code> 默认即是严格模式;</li> <li><code>class</code> 子类必须在构造函数中调用 <code>super()</code>，这样才有 <code>this</code> 对象; <code>ES5</code> 中类继承的关系是相反的，先有子类的 <code>this</code>，然后用父类的方法应用在 <code>this</code> 上。</li></ul> <h2 id="_10、原生-ajax"><a href="#_10、原生-ajax" class="header-anchor">#</a> 10、原生 Ajax</h2> <p><code>ajax</code> 是一种异步通信的方法，通过客户端发送请求，然后从服务端获取数据的方式。 过程：</p> <ul><li>创建 <code>XMLHttpRequest</code> 对象;</li> <li>调用 <code>open</code> 方法传入三个参数：请求方式(<code>GET/POST</code>)、<code>url</code>、同步异步(<code>true/false</code>);</li> <li>监听 <code>onreadystatechange</code> 事件，当 <code>readyState</code> 等于 <code>4</code> 时返回 <code>responseText</code>;</li> <li>调用 <code>send</code> 方法传递参数。</li></ul> <p><code>readyState</code> 是 <code>XMLHttpRequest</code> 对象的一个属性，用来标识当前 <code>XMLHttpRequest</code> 对象处于什么状态。
<code>readyState</code> 总共有 <code>5</code> 个状态值，分别为 <code>0~4</code>，每个值代表了不同的含义</p> <ul><li>0：未初始化 -- 尚未调用 <code>.open()</code> 方法；</li> <li>1：启动 -- 已经调用 <code>.open()</code> 方法，但尚未调用 <code>.send()</code> 方法；</li> <li>2：发送 -- 已经调用 <code>.send()</code> 方法，但尚未接收到响应；</li> <li>3：接收 -- 已经接收到部分响应数据；</li> <li>4：完成 -- 已经接收到全部响应数据，而且已经可以在客户端使用了；</li></ul> <h2 id="_11、this-指向"><a href="#_11、this-指向" class="header-anchor">#</a> 11、this 指向</h2> <p><code>this</code> 对象是执行上下文中的一个属性，它指向最后一次调用这个方法的对象，在全局函数中，<code>this</code> 等于 <code>window</code>，而当函数被作为某个对象调用时，<code>this</code> 等于那个对象。 在实际开发中，<code>this</code> 的指向可以通过四种调用模式来判断。</p> <p><strong>规则-优先级</strong>：<code>New</code> 绑定 &gt; 显示绑定 &gt; 隐式绑定 &gt; 默认绑定</p> <p><strong>过四种调用模式来判断：</strong></p> <ul><li>（默认绑定）函数调用，如果一个函数不是一个对象的属性时，直接作为函数来调用时，<code>this</code> 指向全局对象。</li> <li>（隐式绑定）方法调用，当函数被作为某个对象调用时，<code>this</code> 等于那个对象。</li> <li>（<code>New</code> 绑定）构造函数调用，<code>this</code> 指向这个构造函数的实例。</li> <li>（显示绑定）第四种是 <code>apply</code> 、 <code>call</code> 和 <code>bind</code> 调用模式，这三个方法都可以指定调用函数的 <code>this</code> 指向。<code>apply</code> 接收参数的是数组，<code>call</code> 接受参数列表，<code>bind</code> 也接受参数列表</li></ul> <p><strong>经典题目：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span> 
<span class="token keyword">var</span> <span class="token function-variable function">b</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token keyword">await</span> <span class="token number">10</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// -&gt; '2' 10</span>
  a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> a 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// -&gt; '3' 20</span>
<span class="token punctuation">}</span> 
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
a<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// -&gt; '1' 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>如果一个构造函数，bind了一个对象，用这个构造函数创建出的实例会继承这个对象的属性吗？为什么？</strong>
不会继承，因为根据 <code>this</code> 绑定四大规则，<code>new</code> 绑定的优先级高于 <code>bind</code> 显示绑定，通过 <code>new</code> 进行构造函数调用时，会创建一个新对象，这个新对象会代替 <code>bind</code> 的对象绑定，作为此函数的 <code>this</code>，并且在此函数没有返回对象的情况下，返回这个新建的对象</p> <h2 id="_12、如何正确的判断this-箭头函数的this是什么？"><a href="#_12、如何正确的判断this-箭头函数的this是什么？" class="header-anchor">#</a> 12、如何正确的判断this? 箭头函数的this是什么？</h2> <p>this的绑定规则有四种：默认绑定，隐式绑定，显式绑定，new绑定.</p> <ul><li>函数是否在 new 中调用(new绑定)，如果是，那么 this 绑定的是new中新创建的对象。</li> <li>函数是否通过 call,apply 调用，或者使用了 bind (即硬绑定)，如果是，那么this绑定的就是指定的对象。</li> <li>函数是否在某个上下文对象中调用(隐式绑定)，如果是的话，this 绑定的是那个上下文对象。一般是 obj.foo()</li> <li>如果以上都不是，那么使用默认绑定。如果在严格模式下，则绑定到 undefined，否则绑定到全局对象。</li> <li>如果把 null 或者 undefined 作为 this 的绑定对象传入 call、apply 或者 bind, 这些值在调用时会被忽略，实际应用的是默认绑定规则。</li> <li>箭头函数没有自己的 this, 它的this继承于上一层代码块的this。</li></ul> <p>测试下是否已经成功Get了此知识点(浏览器执行环境):</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  number<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  fn1<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> number<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    number <span class="token operator">=</span> number <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    number <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>number<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>number <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
      number <span class="token operator">*=</span> <span class="token number">3</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> obj<span class="token punctuation">.</span>fn1<span class="token punctuation">;</span>
<span class="token function">fn1</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="_13、new-具体做了什么"><a href="#_13、new-具体做了什么" class="header-anchor">#</a> 13、new 具体做了什么</h2> <ul><li>创建一个新对象</li> <li>设置原型，将对象的原型设置为函数的 <code>prototype</code> 对象。</li> <li>让函数的 <code>this</code> 指向这个对象，并执行构造函数的代码（为这个新对象添加属性）</li> <li>判断函数的返回值类型，如果是值类型，返回创建的对象。如果是引用类型，就返回这个引用类型的对象。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 创建⼀个空的对象 </span>
  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token comment">// 获得构造函数 </span>
  <span class="token keyword">let</span> Con <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span> 
  <span class="token comment">// 链接到原型 </span>
  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Con</span><span class="token punctuation">.</span>prototype 
  <span class="token comment">// 绑定 this， 执⾏构造函数 </span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">Con</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span> 
  <span class="token comment">// 确保 new 出来的是个对象 </span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> result <span class="token operator">:</span> obj
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_14、js有哪些⽅法定义对象"><a href="#_14、js有哪些⽅法定义对象" class="header-anchor">#</a> 14、js有哪些⽅法定义对象</h2> <ul><li>对象字⾯量： <code>var obj = {}</code>;</li> <li>构造函数： <code>var obj = new Object()</code>;</li> <li><code>Object.create()</code> : <code>var obj = Object.create(Object.prototype)</code>;</li></ul> <h2 id="_15、说说你对promise的了解"><a href="#_15、说说你对promise的了解" class="header-anchor">#</a> 15、说说你对promise的了解</h2> <p><code>Promise</code> 是异步编程的一种解决方案，比传统的一一回调函数更合理和有效。主要解决的是回调地狱的问题而提出的解决方案。</p> <p><code>promise</code> 有三种状态: <code>fulfilled</code>, <code>rejected</code>, <code>pending</code>.</p> <ul><li><code>fulfilled</code>: 表示这个 promise 已经被 <code>resolved</code>，一切正常，在这个 <code>promise</code> 内没有异常发生</li> <li><code>rejected</code>: 表示这个 promise 已经被 <code>rejected</code>，有异常发生了</li> <li><code>pending</code>: 表示当这个 promise 既没有被 <code>resolved</code> 也没有被 <code>rejected</code>，那么它就一直是 <code>pending</code></li></ul> <p><code>Promise</code> 简单使用：
当使用 <code>new Promise()</code> 创建一个 <code>Promise</code> 时，传递了一个回调函数给 <code>Promise</code> 的构造器，但是实际上这个回调函数接受两个参数，第一个参数我们称为 <code>resolve</code>，第二个参数我们称为 <code>reject</code>，
当程序没有出错时，调用 <code>resolve</code>，当程序出错时，调用 <code>reject</code>，当然，我们也可以直接使用 <code>Promise.resolve()</code> 或 <code>Promise.reject()</code> 来直接 <code>resolve</code> 或 <code>reject</code> 一个值，接收的参数
可以是一个值，也可以是一个 <code>Promise</code> 对象，然后为了接收 <code>resolve</code> 或者 <code>reject</code> 出来的值，<code>Promise</code> 提供了三个内置方法，<code>then</code>、<code>catch</code>、<code>finally</code>，并且 <code>Promise</code> 支持链式调用，
可以将上一个 <code>then</code> 函数的返回值作为下一个 <code>then</code> 的参数使用.</p> <ul><li><code>.then()</code>：当一个 <code>promise</code> 执行 <code>resolve</code> 方法后会调用</li> <li><code>.catch()</code>: 当一个 <code>promise</code> 执行 <code>reject</code> 方法后会调用</li> <li><code>.finally</code>: 无论一个 <code>promise</code> 是被 <code>resolve</code> 或者 <code>reject</code> 后都会调用</li></ul> <p><code>Promise</code> 的优点:</p> <ul><li>一旦状态改变，就不会再变，任何时候都可以得到这个结果</li> <li>解决了回调地狱的问题</li></ul> <p><code>Promise</code> 的缺点:</p> <ul><li>无法取消 <code>Promise</code></li> <li>当处于 <code>pending</code> 状态时，无法得知目前进展到哪一个阶段</li> <li>错误需要用 <code>catch</code> 来捕获</li></ul> <h2 id="_16、js延迟加载的⽅式有哪些"><a href="#_16、js延迟加载的⽅式有哪些" class="header-anchor">#</a> 16、js延迟加载的⽅式有哪些</h2> <p><code>defer</code> 和 <code>async</code> 、 动态创建 <code>DOM</code> ⽅式（⽤得最多） 、 按需异步载⼊ <code>js</code></p> <h2 id="_17、defer和async"><a href="#_17、defer和async" class="header-anchor">#</a> 17、defer和async</h2> <ul><li><code>defer</code> 并⾏加载 <code>js</code> ⽂件， 会按照⻚⾯上 <code>script</code> 标签的顺序执⾏</li> <li><code>async</code> 并⾏加载 <code>js</code> ⽂件，下载完成⽴即执⾏，不会按照⻚⾯上 <code>script</code> 标签的顺序执⾏</li></ul> <h2 id="_18、怎么判断两个对象相等？"><a href="#_18、怎么判断两个对象相等？" class="header-anchor">#</a> 18、怎么判断两个对象相等？</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>obj<span class="token operator">=</span><span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token number">2</span> <span class="token punctuation">}</span>
obj2<span class="token operator">=</span><span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token number">2</span> <span class="token punctuation">}</span>
obj3<span class="token operator">=</span><span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token string">'2'</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>可以转换为字符串来判断</p></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token operator">==</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token operator">==</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_19、如何解决跨域问题"><a href="#_19、如何解决跨域问题" class="header-anchor">#</a> 19、如何解决跨域问题?</h2> <div class="tip custom-block"><p class="custom-block-title">概念</p> <p>⾸先了解下浏览器的同源策略, 同源策略 /SOP（Same origin policy） 是⼀种约定，它是浏览器最核⼼也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到 <code>XSS</code>、 <code>CSRF</code> 等攻击。所谓同源是指&quot;协议+域名+端⼝&quot;三者相同， 即便两个不同的域名指向同⼀个 <code>ip</code> 地址， 也⾮同源。</p></div> <p><img src="https://user-gold-cdn.xitu.io/2018/5/23/1638b3579d9eeb32?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt></p> <p>当浏览器向目标 <code>URI</code> 发 <code>Ajax</code> 请求时，只要当前 <code>URL</code> 和目标 <code>URL</code> 不同源，则产生跨域，被称为跨域请求。</p> <p>跨域请求的响应一般会被浏览器所拦截，注意，是被浏览器拦截，响应其实是成功到达客户端了。那这个拦截是如何发生呢？</p> <p><strong>同源策略限制内容有：</strong></p> <ul><li>不能读取 <code>Cookie</code>、<code>LocalStorage</code>、<code>IndexedDB</code> 等存储性内容</li> <li>不能修改 <code>DOM</code> 节点</li> <li><code>AJAX</code> 请求发送后，结果被浏览器拦截了</li></ul> <p><strong>但是有三个标签是允许跨域加载资源：</strong></p> <ul><li><code>&lt;img src=XXX&gt;</code></li> <li><code>&lt;link href=XXX&gt;</code></li> <li><code>&lt;script src=XXX&gt;</code></li></ul> <h3 id="_1、通过-jsonp-跨域"><a href="#_1、通过-jsonp-跨域" class="header-anchor">#</a> 1、通过 jsonp 跨域</h3> <p><strong>JSONP 和 AJAX 对比</strong><br> <code>JSONP</code> 和 <code>AJAX</code> 相同，都是客户端向服务器端发送请求，从服务器端获取数据的方式。但 <code>AJAX</code> 属于同源策略，<code>JSONP</code> 属于非同源策略（跨域请求）</p> <p><strong>JSONP 优缺点</strong><br>
JSONP优点是<strong>简单兼容性好</strong>，可用于解决主流浏览器的跨域数据访问的问题。缺点是仅支持 <code>Get</code> 方法具有局限性, 不安全可能会遭受 <code>XSS</code> 攻击。</p> <p>虽然 <code>XMLHttpRequest</code> 对象遵循同源政策，但是 <code>script</code> 标签不一样，<code>script</code> 标签没有跨域限制的特性，它可以通过 <code>src</code> 填上目标地址从而发出 <code>GET</code> 请求，实现跨域请求并拿到响应。这也就是 JSONP 的原理</p> <p><strong>封装一个 <code>JSONP</code> 函数</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.html</span>
<span class="token keyword">let</span> <span class="token function-variable function">jsonp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> callback<span class="token operator">=</span><span class="token string">'callback'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 转化数据为url字符串形式</span>
  <span class="token keyword">let</span> dataStr <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'?'</span> <span class="token operator">:</span> <span class="token string">'&amp;'</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dataStr <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理url中的回调函数</span>
  dataStr <span class="token operator">+=</span> <span class="token string">'callback='</span> <span class="token operator">+</span> callback
  <span class="token comment">// 创建srcipt标签并添加src属性值</span>
  <span class="token keyword">let</span> scriptBody <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>
  scriptBody<span class="token punctuation">.</span>src <span class="token operator">=</span> url <span class="token operator">+</span> dataStr

  <span class="token comment">// append到页面中 添加到页面就立刻发起请求</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>scriptBody<span class="token punctuation">)</span>
  <span class="token comment">//返回一个promise</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">[</span>callback<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        <span class="token comment">// 移除script元素</span>
        scriptBody<span class="token punctuation">.</span>parentNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>scriptBody<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>scriptBody<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token string">'https://photo.sina.cn/aj/index'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> page<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> cate<span class="token operator">:</span> <span class="token string">'recommend'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_2、cors"><a href="#_2、cors" class="header-anchor">#</a> 2、CORS</h3> <p><code>CORS</code> 全称 跨域资源共享(Cross-Origin Resource Sharing)，是一种机制，它通过使用 <code>HTTP</code> 请求头来告诉浏览器允许一个 <code>web</code> 进行跨域资源请求。</p> <p>服务端设置 <code>Access-Control-Allow-Origin</code> 就可以开启 <code>CORS</code>。该属性表示哪些域名可以访问资源，如果设置通配符则表示所有网站都可以访问资源。通过这种方式解决跨域问题的话，会在发送请求时出现两种情况，分别为<strong>简单请求</strong>和<strong>复杂请求</strong>。</p> <p><strong>简单请求</strong><br>
只要同时满足以下两大条件，就属于简单请求</p> <p>条件1：使用下列方法之一：</p> <ul><li><code>GET</code></li> <li><code>POST</code></li> <li><code>HEAD</code></li></ul> <p>条件2：<code>Content-Type</code> 的值仅限于下列三者之一：</p> <ul><li><code>text/plain</code></li> <li><code>multipart/form-data</code></li> <li><code>application/x-www-form-urlencoded</code></li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>注意， 有时我们为了方便实现 <code>CORS</code> 会把 <code>Access-Control-Allow-Origin</code> 设置为 <code>*</code>，即所有域都可以，但如果设置为 <code>*</code> 我们则无法携带 <code>Cookie</code>。</p></div> <p><code>Access-Control-Expose-Headers。</code>这个字段是给 <code>XMLHttpRequest</code> 对象赋能，让它不仅可以拿到基本的 <code>6</code> 个响应头字段（包括 <code>Expires</code>、<code>Pragma</code>、<code>Cache-Control</code>、<code>Last-Modified</code>、<code>Content-Language</code>、和 <code>Content-Type</code>）, 还能拿到这个字段声明的响应头字段。比如这样设置:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>Access-Control-Expose-Headers<span class="token operator">:</span> aaa
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>那么在前端可以通过 <code>XMLHttpRequest.getResponseHeader('aaa')</code> 拿到 <code>aaa</code> 这个字段的值。</p> <p><strong>复杂请求</strong><br>
不符合以上条件的请求就肯定是复杂请求了。 复杂请求的 <code>CORS</code> 请求，会在正式通信之前，增加一次 <code>HTTP</code> 查询请求，称为&quot;预检&quot;请求, 该请求是 <code>Option</code> 方法的，通过该请求来知道服务端是否允许跨域请求。</p> <p><code>Option</code> 请求会携带以下请求头：</p> <ul><li><code>Access-Control-Request-Method: POST</code>  告诉服务器 实际的请求会使用 <code>POST</code> 方法。</li> <li><code>Access-Control-Request-Headers: X-PINGOTHER, Content-Type</code> 告诉服务器携带了哪些自定义首部字段。</li></ul> <p>一般响应头会包含:</p> <ul><li><code>Access-Control-Allow-Origin</code> 可接受的跨域请求源</li> <li><code>Access-Control-Allow-Methods</code> 可接受的跨域请求方法</li> <li><code>Access-Control-Allow-Headers</code> 可接受的自定义请求头字段</li> <li><code>Access-Control-Allow-Credentials</code> 允许携带 <code>cookie</code></li> <li><code>Access-Control-Max-Age</code> 预检的存活时间</li></ul> <p>一次非简单请求的过程如下：</p> <img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/16/16f0c8f56225ea73~tplv-t2oaga2asx-watermark.awebp"> <p>我们用 <code>PUT</code> 向后台请求时，属于复杂请求，后台需做如下配置：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 允许哪个方法访问我</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'PUT'</span><span class="token punctuation">)</span>
<span class="token comment">// 预检的存活时间</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Max-Age'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
<span class="token comment">// OPTIONS 请求不做任何处理</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
<span class="token comment">// 定义后台返回的内容</span>
app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/getData'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'我不爱你'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>接下来我们看下一个完整复杂请求的例子，并且介绍下 <code>CORS</code> 请求相关的字段</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.html</span>
<span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">'name=xiamen'</span> <span class="token comment">// cookie 不能跨域</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 前端设置是否带cookie</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'PUT'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:4000/getData'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'xiamen'</span><span class="token punctuation">)</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span>
      <span class="token comment">//得到响应头，后台需设置Access-Control-Expose-Headers</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// server1.js</span>
<span class="token keyword">let</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// server2.js</span>
<span class="token keyword">let</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> whitList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'http://localhost:3000'</span><span class="token punctuation">]</span> <span class="token comment">// 设置白名单</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> origin <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin
  <span class="token keyword">if</span> <span class="token punctuation">(</span>whitList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置哪个源可以访问我</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> origin<span class="token punctuation">)</span>
    <span class="token comment">// 允许携带哪个头访问我</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Headers'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
    <span class="token comment">// 允许哪个方法访问我</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Methods'</span><span class="token punctuation">,</span> <span class="token string">'PUT'</span><span class="token punctuation">)</span>
    <span class="token comment">// 允许携带cookie</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token comment">// 预检的存活时间</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Max-Age'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
    <span class="token comment">// 允许返回的头</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Expose-Headers'</span><span class="token punctuation">,</span> <span class="token string">'name'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>method <span class="token operator">===</span> <span class="token string">'OPTIONS'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// OPTIONS 请求不做任何处理</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/getData'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'jw'</span><span class="token punctuation">)</span> <span class="token comment">// 返回一个响应头，后台需设置</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'我不爱你'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getData'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'我不爱你'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>上述代码由 <code>http://localhost:3000/index.html</code> 向 <code>http://localhost:4000/</code> 跨域请求，正如我们上面所说的，后端是实现 <code>CORS</code> 通信的关键。</p> <h3 id="_3、node-正向代理"><a href="#_3、node-正向代理" class="header-anchor">#</a> 3、Node 正向代理</h3> <h4 id="a-cli-工具中的代理"><a href="#a-cli-工具中的代理" class="header-anchor">#</a> a.cli 工具中的代理</h4> <ol><li>Webpack (4.x)</li></ol> <p>在webpack中可以配置proxy来快速获得接口代理的能力。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  entry<span class="token operator">:</span> <span class="token punctuation">{</span>    index<span class="token operator">:</span> <span class="token string">&quot;./index.js&quot;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  output<span class="token operator">:</span> <span class="token punctuation">{</span>    filename<span class="token operator">:</span> <span class="token string">&quot;bundle.js&quot;</span><span class="token punctuation">,</span>    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  devServer<span class="token operator">:</span> <span class="token punctuation">{</span>    port<span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>    proxy<span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token string">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>        target<span class="token operator">:</span> <span class="token string">&quot;http://localhost:8080&quot;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      filename<span class="token operator">:</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span>      template<span class="token operator">:</span> <span class="token string">&quot;webpack.html&quot;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>修改前端接口请求方式，改为不带域名。（因为现在是同域请求了）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;getlist&quot;</span><span class="token operator">&gt;</span>获取列表<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;login&quot;</span><span class="token operator">&gt;</span>登录<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">&quot;https://cdn.bootcss.com/axios/0.19.2/axios.min.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>  axios<span class="token punctuation">.</span>defaults<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>  getlist<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/api/corslist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  login<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/api/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>Vue-cli 2.x</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// config/index.js...proxyTable: {  '/api': {     target: 'http://localhost:8080',  }},...</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="3"><li>Vue-cli 3.x</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// vue.config.js 如果没有就新建module.exports = {  devServer: {    port: 8000,    proxy: {      &quot;/api&quot;: {        target: &quot;http://localhost:8080&quot;      }    }  }};</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="4"><li>Parcel (2.x)</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// .proxyrc{  &quot;/api&quot;: {    &quot;target&quot;: &quot;http://localhost:8080&quot;  }}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4、document-domain-iframe跨域"><a href="#_4、document-domain-iframe跨域" class="header-anchor">#</a> 4、document.domain + iframe跨域</h3> <p>此⽅案仅限主域相同， ⼦域不同的跨域应⽤场景</p> <p>1.） ⽗窗⼝： (http://www.domain.com/a.html)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>iframe id<span class="token operator">=</span><span class="token string">&quot;iframe&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;http://child.domain.com/b.html&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>iframe<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'domain.com'</span><span class="token punctuation">;</span> <span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token string">'admin'</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>2.） ⼦窗⼝： (http://child.domain.com/b.html)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'domain.com'</span><span class="token punctuation">;</span> 
<span class="token comment">// 获取⽗窗⼝中变量 </span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'get js data from parent ---&gt; '</span> <span class="token operator">+</span> window<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5、nginx代理跨域"><a href="#_5、nginx代理跨域" class="header-anchor">#</a> 5、nginx代理跨域</h3> <p>实现原理类似于Node中间件代理，需要你搭建一个中转nginx服务器，用于转发请求。</p> <p>使用nginx反向代理实现跨域，是最简单的跨域方式。只需要修改nginx的配置即可解决跨域问题，支持所有浏览器，支持session，不需要修改任何代码，并且不会影响服务器性能。</p> <p>实现思路：通过nginx配置一个代理服务器（域名与domain1相同，端口不同）做跳板机，反向代理访问domain2接口，并且可以顺便修改cookie中domain信息，方便当前域cookie写入，实现跨域登录。</p> <p>先下载nginx，然后将nginx目录下的nginx.conf修改如下:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>// proxy服务器
server <span class="token punctuation">{</span>
  listen       <span class="token number">81</span><span class="token punctuation">;</span>
  server_name  www.domain1.com<span class="token punctuation">;</span>
  location / <span class="token punctuation">{</span>
    proxy_pass   http://www.domain2.com:8080<span class="token punctuation">;</span>  <span class="token comment">#反向代理</span>
    proxy_cookie_domain www.domain2.com www.domain1.com<span class="token punctuation">;</span> <span class="token comment">#修改cookie里域名</span>
    index  index.html index.htm<span class="token punctuation">;</span>

    <span class="token comment"># 当用webpack-dev-server等中间件代理接口访问nignx时，此时无浏览器参与，故没有同源限制，下面的跨域配置可不启用</span>
    add_header Access-Control-Allow-Origin http://www.domain1.com<span class="token punctuation">;</span>  <span class="token comment">#当前端只跨域不带cookie时，可为*</span>
    add_header Access-Control-Allow-Credentials <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>最后通过命令行nginx -s reload启动nginx</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// index.html</span>
<span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 前端开关：浏览器是否读写cookie</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token comment">// 访问nginx中的代理服务器</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token string">'http://www.domain1.com:81/?user=admin'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// server.js</span>
<span class="token keyword">var</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> params <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 向前台写cookie</span>
  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'Set-Cookie'</span><span class="token operator">:</span> <span class="token string">'l=a123456;Path=/;Domain=www.domain2.com;HttpOnly'</span>   <span class="token comment">// HttpOnly:脚本无法读取</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token string">'8080'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Server is running at port 8080...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_20、那些操作会造成内存泄漏？"><a href="#_20、那些操作会造成内存泄漏？" class="header-anchor">#</a> 20、那些操作会造成内存泄漏？</h2> <ul><li><code>setTimeout</code> 的第⼀个参数使⽤字符串⽽⾮函数的话，会引发内存泄漏</li> <li>闭包使⽤不当</li></ul> <h2 id="_21、打乱数组"><a href="#_21、打乱数组" class="header-anchor">#</a> 21、打乱数组</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_22、promise"><a href="#_22、promise" class="header-anchor">#</a> 22、Promise</h2> <h3 id="_1、promise是什么"><a href="#_1、promise是什么" class="header-anchor">#</a> 1、Promise是什么</h3> <p><code>Promise</code> 是异步编程的一种解决方案，比传统的一一回调函数和事件更加合理和有效。</p> <h3 id="_2、如何实现一个promise（promise-a-）"><a href="#_2、如何实现一个promise（promise-a-）" class="header-anchor">#</a> 2、如何实现一个Promise（Promise A+）</h3> <ul><li>手写一个 能够链式调用的 then 函数</li> <li>大厂专用版---秋招前搞懂(手写)</li></ul> <h3 id="_3、宏任务与微任务以及执行顺序？"><a href="#_3、宏任务与微任务以及执行顺序？" class="header-anchor">#</a> 3、宏任务与微任务以及执行顺序？</h3> <ul><li>宏任务：整个代码，<code>setTimeout</code>、<code>setInterval</code>、<code>setImmedia</code></li> <li>微任务：<code>Promise</code>、<code>Process.nextTick</code>、<code>Object.observe</code>、<code>MutationObserve</code></li> <li>执行顺序：整个代码的同步代码，如果遇到 <code>setTimeout</code> ，则放入下一个循环，尝试清空微任务，继续宏任务，清空微任务......</li></ul> <h3 id="_4、javascript-的异步解决方案"><a href="#_4、javascript-的异步解决方案" class="header-anchor">#</a> 4、JavaScript 的异步解决方案</h3> <p><strong>回调函数</strong></p> <ul><li>缺点：回调地狱、不能用 <code>try / catch</code>、不能 <code>return</code></li> <li>优点：通过异步解决同步的问题</li></ul> <p><strong>Promise</strong></p> <ul><li>缺点：不能取消 <code>Promise</code> ，错误需要用回调来捕获</li> <li>优点：解决了回调地狱的问题</li></ul> <p><strong>Generator</strong></p> <ul><li>缺点：代码阅读困难</li> <li>优点：通过配合 <code>co</code> 函数解决了执行后无法停止的问题</li></ul> <p><strong>Async / await</strong></p> <ul><li>缺点：<code>await</code> 将异步代码改造成同步代码，如果代码中没有适当的使用，会造成性能的下降</li> <li>优点：<code>JS</code> 异步编程的终极解决方案，将异步执行用同步的方式表示出来代码清晰</li></ul> <h3 id="_5、如何实现promise-all"><a href="#_5、如何实现promise-all" class="header-anchor">#</a> 5、如何实现Promise.all</h3> <p>基本概念：必须传入一个数组，其中数组可以是常量或者 <code>Promise</code>，如果全部通过，则返回结果，如果其中有一个出错，则走 <code>catch</code> 方法。</p> <h3 id="_6、如何实现promise-any"><a href="#_6、如何实现promise-any" class="header-anchor">#</a> 6、如何实现Promise.any</h3> <h2 id="_23、深浅拷贝"><a href="#_23、深浅拷贝" class="header-anchor">#</a> 23、深浅拷贝</h2> <h3 id="_1-介绍一下javascript的深浅拷贝"><a href="#_1-介绍一下javascript的深浅拷贝" class="header-anchor">#</a> 1. 介绍一下JavaScript的深浅拷贝</h3> <ul><li>浅拷贝：只是复制对象的引用，如果拷贝后的引用对象属性发生变化，原对象也会发生变化</li> <li>深拷贝：真正地对对象的拷贝</li></ul> <h3 id="_2-如何实现浅拷贝"><a href="#_2-如何实现浅拷贝" class="header-anchor">#</a> 2. 如何实现浅拷贝</h3> <ul><li>赋值语句</li> <li>数组方法：<code>concat</code>、<code>slice</code>、<code>Object.assign()</code> -- 首层是深拷贝 第二层后面是浅拷贝</li> <li><code>ES6</code> 的展开运算符</li> <li>手写浅拷贝</li></ul> <h3 id="_3-如何实现深拷贝"><a href="#_3-如何实现深拷贝" class="header-anchor">#</a> 3. 如何实现深拷贝</h3> <ul><li>递归方法 --- 熟练编写</li> <li><code>JSON.parse(JSON.stringify())</code> --- 有局限性 如果属性有函数、<code>Symbol()</code> 就失效</li> <li>优化递归写法，解决循环引用问题---秋招前会</li></ul> <h3 id="_4-如何解决循环引用的问题"><a href="#_4-如何解决循环引用的问题" class="header-anchor">#</a> 4. 如何解决循环引用的问题</h3> <p><code>WeakMap()</code> 解决循环引用</p> <h2 id="_24、节流与防抖"><a href="#_24、节流与防抖" class="header-anchor">#</a> 24、节流与防抖</h2> <h3 id="_1、介绍一下什么是节流和防抖"><a href="#_1、介绍一下什么是节流和防抖" class="header-anchor">#</a> 1、介绍一下什么是节流和防抖</h3> <ul><li>防抖：高频事件触发后，<code>n</code> 秒后只会执行一次，如果高频事件再次被触发，则重新计算时间</li> <li>节流：高频事件触发后，<code>n</code> 秒内只会执行一次，所以节流会稀释函数的执行频率</li></ul> <h3 id="_2、如何实现节流和防抖"><a href="#_2、如何实现节流和防抖" class="header-anchor">#</a> 2、如何实现节流和防抖</h3> <ul><li>手写一种防抖</li> <li>手写三种节流并搞懂分别优缺点</li></ul> <h3 id="_3、防抖和节流的相同点和不同点"><a href="#_3、防抖和节流的相同点和不同点" class="header-anchor">#</a> 3、防抖和节流的相同点和不同点</h3> <ul><li>相同点：都可以用 <code>setTimeout</code> 实现，都是降低回调的执行频率，节省计算资源</li> <li>不同点：防抖是一段时间后执行函数，节流是一段时间内只执行函数一次，都是提高性能</li></ul> <h3 id="_4、介绍一下节流和防抖的运用场景"><a href="#_4、介绍一下节流和防抖的运用场景" class="header-anchor">#</a> 4、介绍一下节流和防抖的运用场景</h3> <ul><li>节流：滚动加载、浏览器 <code>resize</code> 窗口大小</li> <li>防抖：<code>input</code> 搜索框搜索输入、手机号、验证码检测</li></ul> <h2 id="_25、事件机制-event-loop"><a href="#_25、事件机制-event-loop" class="header-anchor">#</a> 25、事件机制 / Event Loop</h2> <h3 id="_1、什么是单线程？"><a href="#_1、什么是单线程？" class="header-anchor">#</a> 1、什么是单线程？</h3> <p><code>JavaScript</code> 语言的一大特点就是单线程，就是在特定的时刻只有特定的代码能够被执行，并阻塞其他代码的执行，也就是说同一时间只能做一件事。</p> <h3 id="_2、介绍一下事件循环"><a href="#_2、介绍一下事件循环" class="header-anchor">#</a> 2、介绍一下事件循环</h3> <p>事件循环是指浏览器或者 <code>Node</code> 的一种解决 <code>JavaScript</code> 单线程运行时不会阻塞的一种机制，也就是我们经常使用的异步的原理。<code>JavaScript</code> 单线程分为同步任务和异步任务，在主程序中的所有同步代码执行完毕，然后再读取任务队列中的异步任务，而异步任务又分为宏任务和微任务，执行一个宏任务，尝试清空微任务，这个过程是不断循环的，所以整个的运行机制叫做事件循环(<code>Event Loop</code>)。</p> <p><strong>所以正确的⼀次 <code>Event loop</code> 顺序是这样的</strong></p> <ul><li>执⾏同步代码， 这属于宏任务</li> <li>执⾏栈为空， 查询是否有微任务需要执⾏</li> <li>执⾏所有微任务</li> <li>必要的话渲染 <code>UI</code></li> <li>然后开始下⼀轮 <code>Event loop</code> ， 执⾏宏任务中的异步代码</li></ul> <h3 id="_3、为什么-js-有事件循环机制"><a href="#_3、为什么-js-有事件循环机制" class="header-anchor">#</a> 3、为什么 JS 有事件循环机制</h3> <p><code>JavaScript</code> 从诞生起就是单线程，但单线程导致很多任务需要排队，只有一个任务执行完毕才能执行下一个任务，但如果一个任务执行时间过长，就会导致阻塞，所以 <code>JavaScript</code> 引入事件循环机制。</p> <h3 id="_4-只有宏任务不行？为什么引入微任务"><a href="#_4-只有宏任务不行？为什么引入微任务" class="header-anchor">#</a> 4. 只有宏任务不行？为什么引入微任务</h3> <p>因为宏任务是秉承着先进先出的原则，在 <code>JS</code> 代码中如果需要一个优先级比较高的先执行，但是宏任务是先进先出的原则，所以必须引入微任务，让需要优先执行的代码优先执行。</p> <h3 id="_5、node-中的事件循环和浏览器中的事件循环有什么区别？"><a href="#_5、node-中的事件循环和浏览器中的事件循环有什么区别？" class="header-anchor">#</a> 5、Node 中的事件循环和浏览器中的事件循环有什么区别？</h3> <p>在 <code>Node V11</code> 后的版本跟浏览器保持一致</p> <h3 id="_6、宏任务与微任务有什么区别"><a href="#_6、宏任务与微任务有什么区别" class="header-anchor">#</a> 6、宏任务与微任务有什么区别</h3> <ul><li>宏任务：整个代码，<code>setTimeout</code>、<code>setInterval</code>、<code>setImmedia</code></li> <li>微任务：<code>Promise</code>、<code>async / await</code>，<code>process.nextTick</code>、<code>Object.observe</code>、<code>MutationObserve</code></li></ul> <h2 id="_26、事件的捕获与冒泡"><a href="#_26、事件的捕获与冒泡" class="header-anchor">#</a> 26、事件的捕获与冒泡</h2> <h3 id="_1、基本概念"><a href="#_1、基本概念" class="header-anchor">#</a> 1、基本概念</h3> <p>事件流是网页元素接收事件的顺序，&quot;DOM2级事件&quot;规定的事件流包括三个阶段：事件捕获阶段、处于目标阶段、事件冒泡阶段。</p> <ul><li>冒泡型事件：当你使⽤事件冒泡时，⼦级元素先触发，⽗级元素后触发</li> <li>捕获型事件：当你使⽤事件捕获时，⽗级元素先触发，⼦级元素后触发</li> <li><code>DOM</code> 事件流：同时⽀持两种事件模型：捕获型事件和冒泡型事件</li> <li>阻⽌冒泡：在 <code>W3c</code> 中，使⽤ <code>e.stopPropagation()</code> ⽅法； 在 <code>IE 下设置</code> <code>window.event.cancelBubble = true</code> 阻⽌捕获：</li> <li>阻⽌事件的默认⾏为，例如<code>click - &lt;a&gt;</code> 后的跳转。 在 <code>W3c</code> 中，使⽤ <code>e.preventDefault()</code> ⽅法，在 <code>IE</code> 下设置 <code>window.event.returnValue = false</code></li></ul> <h3 id="_2、dom-事件流的三个阶段"><a href="#_2、dom-事件流的三个阶段" class="header-anchor">#</a> 2、DOM 事件流的三个阶段</h3> <p>先捕获阶段，然后目标阶段，最后是冒泡阶段</p> <h3 id="_3、window-addeventlistener-监听的是什么阶段的事件？"><a href="#_3、window-addeventlistener-监听的是什么阶段的事件？" class="header-anchor">#</a> 3、window.addEventListener 监听的是什么阶段的事件？</h3> <p><code>addEventListener()</code> 基本上有三个参数，分别是「事件名称」、「事件的处理程序」(事件触发时执行的 <code>function</code>)，
以及一个<code>「Boolean」</code>值，由这个 <code>Boolean</code> 决定事件是以「捕获」还是「冒泡」机制执行，若不指定则预设为「冒泡」。</p> <ul><li>冒泡：如果第三个参数是 <code>false</code> 或者不传递</li> <li>捕获：第三个参数是 <code>true</code></li></ul> <h3 id="_4、window-removeeventlistener"><a href="#_4、window-removeeventlistener" class="header-anchor">#</a> 4、window.removeEventListener()</h3> <ul><li>值得注意的是，解绑函数的第二个参数不能是<code>匿名函数</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除事件，但是没用</span>
btn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 把 event 函数程序拉出來</span>
<span class="token keyword">var</span> <span class="token function-variable function">clickHandler</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'HI'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> clickHandler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 移除 clickHandler， ok!</span>
btn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> clickHandler<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_5、什么是事件代理（事件委托）"><a href="#_5、什么是事件代理（事件委托）" class="header-anchor">#</a> 5、什么是事件代理（事件委托）</h3> <ul><li><code>事件代理</code>就是利用事件冒泡或事件捕获的机制把一系列的内层元素事件绑定到外层元素</li> <li><code>事件代理</code>即是把原本需要绑定的事件委托给⽗元素， 让⽗元 素担当事件监听的职务。 事件代理的原理是 <code>DOM</code> 元素的事件冒泡。 使⽤事件代理的好处是 可以提⾼性能</li></ul> <h3 id="_6、如何阻止冒泡事件和默认事件"><a href="#_6、如何阻止冒泡事件和默认事件" class="header-anchor">#</a> 6、如何阻止冒泡事件和默认事件</h3> <p>（1）阻止冒泡事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">stopBubble</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span><span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>（2）阻止默认事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">stopDefault</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>preventDefault<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>returnValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>案例</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>事件冒泡<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">&quot;parEle&quot;</span><span class="token operator">&gt;</span>我是父元素    <span class="token operator">&lt;</span>span id<span class="token operator">=</span><span class="token string">&quot;sonEle&quot;</span><span class="token operator">&gt;</span>我是子元素<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">var</span> sonEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'sonEle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> parEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'parEle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

parEle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'父级 冒泡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
parEle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'父级 捕获'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

sonEle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'子级冒泡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sonEle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'子级捕获'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>当点击子元素后，事件按 <code>DOM</code> 事件流的顺序执行事件处理程序：</p> <ul><li>父级捕获</li> <li>子级捕获</li> <li>子级冒泡</li> <li>父级冒泡</li></ul> <p><strong>IE 兼容</strong></p> <ul><li>attachEvent('on' + type, handler)</li> <li>detachEvent('on' + type, handler)</li></ul> <h2 id="_27、柯里化"><a href="#_27、柯里化" class="header-anchor">#</a> 27、柯里化</h2> <p>柯里化（<code>Currying</code>）是把接收多个参数的函数变换成接收一个单一参数（最初函数的第一个参数）的函数，并且返回接收余下的参数且返回结果的新函数的技术</p> <h2 id="_28、数组常用方法"><a href="#_28、数组常用方法" class="header-anchor">#</a> 28、数组常用方法</h2> <p><strong>1. 不改变自身的</strong></p> <p><code>concat</code>、<code>slice</code>、<code>join</code>、<code>toString</code>、<code>toLocaleString</code>、<code>indexOf</code>、<code>lastIndexOf</code>、<code>toSource</code>、<code>includes</code></p> <p><strong>2. 改变自身的</strong></p> <p><code>push</code>、<code>pop</code>、<code>shift</code>、<code>unshift</code>、<code>reverse</code>、<code>sort</code>、<code>splice</code>、<code>copyWithin</code>、<code>fill</code></p> <p><strong>3. 循环</strong></p> <p><code>map</code>、<code>forEach</code>、<code>filter</code>、<code>every</code>、<code>some</code>、<code>reduce</code>、<code>reduceRight</code>、<code>entries</code>、<code>find</code>、<code>findIndex</code>、<code>keys</code>、<code>values</code></p> <p><strong>4. Array构造器</strong></p> <p><code>new Array()</code>、<code>Array.of()</code>、<code>Array.from()</code></p> <p><strong>5. 数组去重方法</strong></p> <ul><li><code>1.Array.prototype.indexOf()</code></li> <li><code>2.Array.prototype.sort()</code></li> <li><code>3.Array.prototype.includes()</code></li> <li><code>4.Array.prototype.reduce()</code></li> <li><code>5.Map()</code></li> <li><code>6.Set()</code></li></ul> <p><strong>6. 类数组转换成数组</strong></p> <ul><li><code>Array.prototype.slice.call(someNode.childNodes, 0)</code></li> <li><code>Array.from(someNode.childNodes)</code></li> <li>展开运算符</li></ul></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.f426d84b.js" defer></script><script src="/assets/js/17.e27753d2.js" defer></script>
  </body>
</html>
